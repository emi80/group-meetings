<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<span id="spanDate"></span>

		<meta name="description" content="Lab Meeting">
		<meta name="author" content="Emilio Palumbo">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link href='http://fonts.googleapis.com/css?family=Fauna+One|Fjalla+One' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="../bootstrap/css/bootstrap-theme.min.css">
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
		<link rel="stylesheet" href="../css/reveal.min.css">
		<link rel="stylesheet" href="../css/badge_only.css">
		<link rel="stylesheet" href="../css/style.css">
		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="../lib/css/zenburn.css">
		<!-- <link rel="stylesheet" href="../css/ray.css">
		<link rel="stylesheet" href="../css/solarized_dark.css"> -->
		<!-- <link rel="stylesheet" href="../css/theme/default.css" id="theme"> -->
		<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
		<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = '../css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>
		<!--[if lt IE 9]>
		<script src="/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
	  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-collapse collapse">
          <ul id="nav-sections" class="nav navbar-nav navbar-right">
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
		<div class="reveal">
			<div class="container slides">
				<section data-markdown="slides.md"
					data-separator="^------"
					data-vertical="^\n\n"
					data-notes="^Note:"
					data-charset="iso-8859-15">
				</section>
			</div>
			<div class="rst-versions rst-badge" data-toggle="rst-versions">
		    <span class="rst-current-version" data-toggle="rst-current-version">
		      <span class="fa fa-book">&nbsp;</span>
		      <span class="fa fa-caret-down"></span>
		    </span>
    	<div class="rst-other-versions">
      <dl>
        <dt>Group meetings</dt>
        <dd><a href="../20140625"></a></dd>
        <dd><a href="../20160113"></a></dd>
    	</dl>
		</div>
		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal.min.js"></script>
		<script src="../bootstrap/js/bootstrap.min.js"></script>
		<script>
		  var locationDate = window.location.pathname.replace(/\/$/gi, '').split('/').pop()
			var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
			var date, dateString;
			$(document).ready(function() {
				$('.rst-other-versions').find('a').each(function() {
					var thisDate = $(this).attr('href').split('/').pop();
					var d = getPresentationDate(thisDate);
					var ds = months[d.getMonth()-1] + " " + d.getDate()+ ", " + d.getFullYear();
					if (thisDate == locationDate) {
						date = d;
						dateString = ds;
					}
					$(this).text(ds);
				});
				var text = '<span class="fa fa-book">&nbsp;</span>' + dateString + '<span class="fa fa-caret-down"></span>';
				$('.rst-current-version').html(text);
			});
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
        center: true,
        slideNumber: true,
        embedded: true,
				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

				margin: 0,
				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: '../plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

			function getPresentationDate(strDate) {
				 var year = strDate.substr(0, 4);
				 var month = strDate.substr(4, 2);
				 var day = strDate.substr(6, 2);
				 return new Date(year, month, day);
			}

			function vslidedots(event, el){
			  var totalslides = document.querySelectorAll( '.reveal .slides section:not(.stack)' ).length;
			  var current_slide = 0;

			  var horizontal_slides = document.querySelectorAll( '.reveal .slides>section' );
			  var idxh = event.indexh;
			  var idxv = event.indexv;
			  if (el != null) {
			  	idxh = el;
			  	idxv = (el == event.indexh ? event.indexv : 0)
			  }
			  var subslides = horizontal_slides[idxh].querySelectorAll('section');

			  // return current_slide.toString()+"/"+totalslides.toString();
			  return Array(idxv+1).join('<i class="fa fa-dot-circle-o"></i>')+Array(subslides.length-idxv).join('<i class="fa fa-circle-o"></i>');
			}

			Reveal.addEventListener( 'slidechanged', function( event ) {
				$("a[id*='nav-']").parent().removeClass("active");
  				$("#nav-" + event.indexh).parent().addClass("active");
				$("a[id*='nav-']").each(function() {
					var text = $(this).html().split("<br>")[0];
					$(this).html(text+"<br>"+vslidedots(event,$(this).attr("id").split("-")[1]));
				})
			});

			Reveal.addEventListener( 'ready', function( event ) {
				// document.title = "Emilio Palumbo - Lab Meeting - " + dateString;
				document.title = $(Reveal.getSlide(0)).find('h1').text();
				var text = '<p><small>Emilio Palumbo<br>' + dateString + '</small></p>';
				$(Reveal.getSlide(0)).append(text);
				$('.reveal strong').css('font-weight', Math.round($('body').css('font-weight') * 1.75/100)*100);
				$(".reveal .slides>section").each(function ( index ) {
					if (index>0) {
					 	$("#nav-sections").append('<li><a id="nav-'+(index)+'" href="#/'+(index)+'">'+$("h1", this).text()+'</a></li>')
					}
				});
				$("a[id*='nav-']").parent().removeClass("active");
  				$("#nav-" + event.indexh).parent().addClass("active");
				$("a[id*='nav-']").each(function() {
					var text = $(this).html().split("<br>")[0];
					$(this).html(text+"<br>"+vslidedots(event,$(this).attr("id").split("-")[1]));
				})
			});

			$("[data-toggle='rst-current-version']").click(function() {
        	$("[data-toggle='rst-versions']").toggleClass("shift-up")
      });

			$(document).keypress(function(e){
				if (e.which == 116) toggleNavbar(); // 't' pressed
				if (e.which == 118) toggleVersions(); // 'v' pressed
			});

			function toggleNavbar() {
				var display = ($(".navbar-fixed-top").css("display") == 'block' ? 'none' : 'block');
				$(".navbar-fixed-top").css("display", display);
			}

			function toggleVersions() {
				var display = ($(".rst-versions.rst-badge").css("display") == 'block' ? 'none' : 'block');
				$(".rst-versions.rst-badge").css("display", display)
			}
		</script>
	</body>
</html>
